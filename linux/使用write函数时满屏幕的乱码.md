最近在编写程序的时候，涉及到了write函数，但是一调用就是满屏幕的乱码，如图所示。

![title](../.local/static/2019/7/5/write_error.1567135454253.png)

之前就碰到很久了，经过将近2天的排查，最开始以为是写入的虚拟地址为空造成的问题，遂开始一步步各种方式尝试排查虚拟地址的问题，后来突然反应过来是可能是打开的文件描述符fd的问题。遂打印fd的值查看，在满屏幕乱码的状态下，fd是0，当正常运行程序的时候，fd是6（仅针对当前运行的程序而言，其实可能是非0 1 2 的任意数）。然后继续追查，发现是新使用的函数打开的fd传错了。

**拓展**

为何打开fd为0 会有满屏幕的乱码？

其实并不是乱码，而其实是写入的数据。linux下，进程默认将0 1 2 分别保存为标准输入文件、标准输出文件、标准错误输出文件的文件描述符。故当我们向标准输入文件 fd为0 写入时，就默认从标准输出文件 fd 为1 输出了出来，所谓标准输入输出就是指的是当前的shell终端界面。